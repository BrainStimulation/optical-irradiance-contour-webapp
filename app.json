[{"name":"app.R","content":"# Load packages ----\nlibrary(shiny)\nlibrary(bslib)\n\n# User interface ----\nui <- page_sidebar(\n  title = \"Optogenetics Contour Visualiser [PAPER TITLE, CITATION INFO, & DOI HERE]\",\n  # SIDEBAR WITH INPUT OPTIONS\n  sidebar = sidebar(\n    title = \"Input Options\",\n    # Wavelength radio buttons\n    radioButtons(\n      \"wavelength\",\n      \"Wavelength (nm)\",\n      choices = list(\"480\", \"580\", \"640\"),\n      selected = \"480\"\n    )\n  )\n)\n\n# Server logic\nserver <- function(input, output) {\n  # REACTIVE EXPRESSIONS FOR VARIABLES IN PLOTTING AND DOWNLOADING FUNCTIONS\n\n  # colour of contour line\n  pcolour <- reactive({\n    req(input$wavelength)\n    colour <- switch(\n      input$wavelength,\n      \"480\" = \"blue\", #accurate colour is #00d5ff\n      \"580\" = \"green\", #note in reality it is yellow #ffff00\n      \"640\" = \"#ff2100\" #accurate to 640 nm\n      #https://academo.org/demos/wavelength-to-colour-relationship/\n    )\n    return(colour)\n  })\n  observe({\n    val <- pcolour()\n    message(paste0(\"pcolour updated to \", val))\n  })\n}\n\n# Run the app\nshinyApp(ui = ui, server = server)\n","type":"text"},{"name":"install.R","content":"cat(\"Installing packages, this may take a few minutes...\\n\\n\\n\\n\")\n\ninstall.packages(\"shinylive\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"shiny\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"bslib\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"R.matlab\", repos = \"http://cran.us.r-project.org\")\n\ncat(\"\\n\\nInstall complete!\")\n\n","type":"text"},{"name":"run.R","content":"cat(\"\\n\\n===============================================================\")\ncat(\"\\n\\n      Welcome to the optical irradiance contour viewer!\\n\\n\")\ncat(\"===============================================================\\n\\n\\n\\n\")\n\ncat(\"Installing packages, this may take a few minutes...\\n\\n\\n\\n\")\n\ninstall.packages(\"shiny\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"bslib\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"R.matlab\", repos = \"http://cran.us.r-project.org\")\n\ncat(\"\\n\\nInstall complete!\")\n\ncat(\"\\n\\n\\n\\n===============================================================\\n\\n\\n\\n\")\n\ncat(\"Loading app...\\n\")\ncat(\"Once you see a URL that looks like this: http://127.0.0.1:XXXX\\n\")\ncat(\"go to the URL on your browser to access the viewer.\\n\\n\")\ncat(\"You can press Ctrl+C at any time on this terminal window, or close this terminal window, to stop the app.\\n\\n\\n\\n\")\n\nlibrary(shiny)\nrunApp(\"app.R\")\n","type":"text"}]
